"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{236:function(e,t,l){l.r(t),l.d(t,{default:function(){return u}});var n=l(7437),i=l(2265),a=l(6896),s=l(8808),o=l(4120),r=l(376),c=l.n(r),d=l(3464);function u(e){let{pdfUrl:t,docId:l}=e,[a,r]=(0,i.useState)([]),[u,p]=(0,i.useState)(null),[b,f]=(0,i.useState)(null);(0,i.useEffect)(()=>{d.Z.get("/api/fields/".concat(l)).then(e=>{r(e.data.fields||[])}).catch(()=>{console.log("No saved mapping yet.")})},[l]);let x=(e,t,l)=>{r(n=>n.map(n=>n.id===e?{...n,x:t,y:l}:n))},g=e=>{r(t=>t.filter(t=>t.id!==e)),f(null)},h=async()=>{await d.Z.post("/api/fields/".concat(l),{fields:a}),alert("Mapping saved!")};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"relative border shadow p-2 inline-block",onClick:e=>{let t=e.target.getBoundingClientRect(),l=e.clientX-t.left,n=e.clientY-t.top,i={id:Date.now().toString(),x:l,y:n,label:"Signature"};r(e=>[...e,i])},children:[(0,n.jsx)(s.Z,{file:t,onLoadSuccess:e=>{let{numPages:t}=e;return p(t)},children:Array.from(Array(u),(e,t)=>(0,n.jsx)(o.Z,{pageNumber:t+1,width:600},"page_".concat(t+1)))}),a.map(e=>(0,n.jsx)(c(),{defaultPosition:{x:e.x,y:e.y},onStop:(t,l)=>x(e.id,l.x,l.y),children:(0,n.jsxs)("div",{className:"absolute px-2 py-1 bg-yellow-200 border border-yellow-600 cursor-move text-xs rounded ".concat(b===e.id?"ring-2 ring-blue-400":""),onClick:t=>{t.stopPropagation(),f(e.id)},children:[e.label,b===e.id&&(0,n.jsx)("button",{className:"ml-2 text-red-500",onClick:()=>g(e.id),children:"âœ•"})]})},e.id))]}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("button",{onClick:h,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Save Mapping"})})]})}l(8746),l(9882),a.Tu.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(a.i8,"/pdf.worker.min.js")}}]);